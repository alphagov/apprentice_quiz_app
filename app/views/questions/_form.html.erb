<% if @question.errors.any? %>
  <%= render "govuk_publishing_components/components/error_alert", {
        message: "There are errors with your submission."
      } %>

  <%= render "govuk_publishing_components/components/error_summary", {
        id: "error-summary",
        title: "There is a problem",
        description: "Please fix the following errors:",
        items: @question.errors.map { |attribute, message|
          { text: h(@question.errors.full_message(attribute, message)), href: "#question_#{attribute}" }
        }
      } %>
<% end %>

<%= form_with(model: [@quiz, @question], local: true) do |f| %>
  <%= render "govuk_publishing_components/components/input", {
        label: { text: "Question" },
        name: "question[content]",
        value: @question.content,
        id: "question_content"
      } %>
  <% if @question.errors[:content].present? %>
    <%= render "govuk_publishing_components/components/error_message", {
          text: h(@question.errors.full_messages_for(:content).join(", ")),
          id: "question_content_error"
        } %>
  <% end %>

  <%= render "govuk_publishing_components/components/input", {
        label: { text: "Option A" },
        name: "question[option_a]",
        value: @question.option_a,
        id: "question_option_a"
      } %>
  <% if @question.errors[:option_a].present? %>
    <%= render "govuk_publishing_components/components/error_message", {
          text: h(@question.errors.full_messages_for(:option_a).join(", ")),
          id: "question_option_a_error"
        } %>
  <% end %>

  <%= render "govuk_publishing_components/components/input", {
        label: { text: "Option B" },
        name: "question[option_b]",
        value: @question.option_b,
        id: "question_option_b"
      } %>
  <% if @question.errors[:option_b].present? %>
    <%= render "govuk_publishing_components/components/error_message", {
          text: h(@question.errors.full_messages_for(:option_b).join(", ")),
          id: "question_option_b_error"
        } %>
  <% end %>

  <%= render "govuk_publishing_components/components/input", {
        label: { text: "Option C" },
        name: "question[option_c]",
        value: @question.option_c,
        id: "question_option_c"
      } %>
  <% if @question.errors[:option_c].present? %>
    <%= render "govuk_publishing_components/components/error_message", {
          text: h(@question.errors.full_messages_for(:option_c).join(", ")),
          id: "question_option_c_error"
        } %>
  <% end %>

  <%= render "govuk_publishing_components/components/input", {
        label: { text: "Option D" },
        name: "question[option_d]",
        value: @question.option_d,
        id: "question_option_d"
      } %>
  <% if @question.errors[:option_d].present? %>
    <%= render "govuk_publishing_components/components/error_message", {
          text: h(@question.errors.full_messages_for(:option_d).join(", ")),
          id: "question_option_d_error"
        } %>
  <% end %>

  <%= render "govuk_publishing_components/components/radio", {
        heading: "Select the correct option",
        name: "question[correct_option]",
        items: [
          { value: "option_a", text: "Option A" },
          { value: "option_b", text: "Option B" },
          { value: "option_c", text: "Option C" },
          { value: "option_d", text: "Option D" }
        ]
      } %>
  <% if @question.errors[:correct_option].present? %>
    <%= render "govuk_publishing_components/components/error_message", {
          text: h(@question.errors.full_messages_for(:correct_option).join(", ")),
          id: "question_correct_option_error"
        } %>
  <% end %>

  <%= f.submit "Save", class: "govuk-button" %>
<% end %>
